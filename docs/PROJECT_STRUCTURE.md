# ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“Š æ€»ä½“æ¶æ„

```
UGIMS/
â”œâ”€â”€ src/                          # æ‰€æœ‰æºä»£ç 
â”‚   â”œâ”€â”€ main.cpp                  # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ ui/                       # UIçª—å£æ¨¡å—
â”‚   â”œâ”€â”€ widgets/                  # è‡ªå®šä¹‰ç»„ä»¶æ¨¡å—
â”‚   â”œâ”€â”€ tilemap/                  # ç“¦ç‰‡åœ°å›¾æ¨¡å—
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ dao/                      # æ•°æ®è®¿é—®æ¨¡å—
â”‚   â””â”€â”€ map/                      # åœ°å›¾æ¸²æŸ“æ¨¡å—
â”œâ”€â”€ resources/                    # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ images/                   # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ styles/                   # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ image.qrc                 # å›¾ç‰‡èµ„æºé…ç½®
â”‚   â””â”€â”€ style.qrc                 # æ ·å¼èµ„æºé…ç½®
â”œâ”€â”€ docs/                         # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ scripts/                      # å·¥å…·è„šæœ¬
â”œâ”€â”€ config/                       # é…ç½®æ–‡ä»¶
â”œâ”€â”€ database/                     # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ third_party/                  # ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ˆQt DLLç­‰ï¼‰
â”œâ”€â”€ tilemap/                      # åœ°å›¾ç“¦ç‰‡ç¼“å­˜
â”œâ”€â”€ logs/                         # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ build/                        # æ„å»ºè¾“å‡ºï¼ˆdebug/releaseï¼‰
â”œâ”€â”€ CustomTitleBarApp.pro         # Qté¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
â””â”€â”€ .gitignore                    # Gitå¿½ç•¥é…ç½®
```

---

## ğŸ—‚ï¸ è¯¦ç»†ç›®å½•è¯´æ˜

### ğŸ“¦ `src/` - æºä»£ç ç›®å½•

#### `src/main.cpp`
- **åŠŸèƒ½**: ç¨‹åºå…¥å£
- **èŒè´£**:
  - åˆå§‹åŒ–QApplication
  - åŠ è½½QSSæ ·å¼è¡¨
  - åˆ›å»ºä¸»çª—å£
  - å¯åŠ¨äº‹ä»¶å¾ªç¯

#### `src/ui/` - ç”¨æˆ·ç•Œé¢æ¨¡å—
```
src/ui/
â”œâ”€â”€ myform.h / myform.cpp / myform.ui
â”‚   â””â”€â”€ ä¸»ç•Œé¢çª—å£ï¼ˆåœ°å›¾æ˜¾ç¤ºã€åŠŸèƒ½æŒ‰é’®ã€èœå•æ ï¼‰
â””â”€â”€ mapmanagerdialog.h / mapmanagerdialog.cpp
    â””â”€â”€ åœ°å›¾ç®¡ç†å¯¹è¯æ¡†ï¼ˆä¸‹è½½è®¾ç½®ã€åŒºåŸŸé€‰æ‹©ï¼‰
```

**èŒè´£**:
- UIå¸ƒå±€å’Œäº¤äº’é€»è¾‘
- ç”¨æˆ·è¾“å…¥å¤„ç†
- ç•Œé¢çŠ¶æ€æ›´æ–°

**ä¾èµ–**:
- `widgets/` - ä½¿ç”¨è‡ªå®šä¹‰çª—å£ç»„ä»¶
- `tilemap/` - è°ƒç”¨åœ°å›¾ç®¡ç†å™¨
- `core/` - ä½¿ç”¨é…ç½®å’Œæ—¥å¿—
- `dao/` - æ•°æ®æŸ¥è¯¢å’Œå±•ç¤º

#### `src/widgets/` - è‡ªå®šä¹‰ç»„ä»¶æ¨¡å—
```
src/widgets/
â”œâ”€â”€ basewindow.h / basewindow.cpp
â”‚   â””â”€â”€ æ— è¾¹æ¡†çª—å£åŸºç±»ï¼ˆè‡ªå®šä¹‰æ ‡é¢˜æ æ”¯æŒï¼‰
â”œâ”€â”€ customtitlebar.h / customtitlebar.cpp
â”‚   â””â”€â”€ è‡ªå®šä¹‰æ ‡é¢˜æ ç»„ä»¶ï¼ˆæœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­æŒ‰é’®ï¼‰
â””â”€â”€ mapmanagersettings.h / mapmanagersettings.cpp
    â””â”€â”€ åœ°å›¾ç®¡ç†è®¾ç½®ï¼ˆå‚æ•°é…ç½®ã€ä¿å­˜åŠ è½½ï¼‰
```

**èŒè´£**:
- æä¾›å¯å¤ç”¨çš„UIç»„ä»¶
- çª—å£å¤–è§‚å’Œè¡Œä¸ºå®šåˆ¶
- å‚æ•°æŒä¹…åŒ–

**ç‰¹æ€§**:
- æ— è¾¹æ¡†çª—å£
- è‡ªå®šä¹‰æ ‡é¢˜æ 
- æ‹–æ‹½ã€ç¼©æ”¾æ”¯æŒ
- çª—å£é˜´å½±æ•ˆæœ

#### `src/tilemap/` - ç“¦ç‰‡åœ°å›¾æ¨¡å—
```
src/tilemap/
â”œâ”€â”€ tilemapmanager.h / tilemapmanager.cpp
â”‚   â””â”€â”€ åœ°å›¾ç®¡ç†å™¨ï¼ˆåæ ‡è½¬æ¢ã€ç“¦ç‰‡åŠ è½½ã€ç¼“å­˜ç®¡ç†ï¼‰
â”œâ”€â”€ tileworker.h / tileworker.cpp
â”‚   â””â”€â”€ ç“¦ç‰‡ä¸‹è½½å·¥ä½œçº¿ç¨‹ï¼ˆå¼‚æ­¥ä¸‹è½½ã€å›¾ç‰‡å¤„ç†ï¼‰
â”œâ”€â”€ downloadscheduler.h / downloadscheduler.cpp
â”‚   â””â”€â”€ ä¸‹è½½è°ƒåº¦å™¨ï¼ˆä»»åŠ¡é˜Ÿåˆ—ã€é™é€Ÿã€é‡è¯•ï¼‰
â””â”€â”€ manifeststore.h / manifeststore.cpp
    â””â”€â”€ ä»»åŠ¡æ¸…å•å­˜å‚¨ï¼ˆæ–­ç‚¹ç»­ä¼ ã€è¿›åº¦ä¿å­˜ï¼‰
```

**èŒè´£**:
- OpenStreetMapç“¦ç‰‡ä¸‹è½½
- åæ ‡ç³»è½¬æ¢ï¼ˆWGS84 â†” Web Mercatorï¼‰
- ç“¦ç‰‡ç¼“å­˜ç®¡ç†
- ä¸‹è½½ä»»åŠ¡è°ƒåº¦

**æŠ€æœ¯è¦ç‚¹**:
- å¤šçº¿ç¨‹ä¸‹è½½
- ä»»åŠ¡æŒä¹…åŒ–
- æ™ºèƒ½ç¼“å­˜
- é€Ÿç‡é™åˆ¶

#### `src/core/` - æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
```
src/core/
â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ logger.h / logger.cpp
â”‚   â”‚   â””â”€â”€ æ—¥å¿—ç³»ç»Ÿï¼ˆå¤šçº§åˆ«ã€çº¿ç¨‹å®‰å…¨ã€æ–‡ä»¶è¾“å‡ºï¼‰
â”‚   â”œâ”€â”€ config.h / config.cpp
â”‚   â”‚   â””â”€â”€ é…ç½®ç®¡ç†ï¼ˆINIæ–‡ä»¶è¯»å†™ã€å‚æ•°éªŒè¯ï¼‰
â”œâ”€â”€ database/
â”‚   â””â”€â”€ databasemanager.h / databasemanager.cpp
â”‚       â””â”€â”€ æ•°æ®åº“ç®¡ç†å™¨ï¼ˆè¿æ¥æ± ã€äº‹åŠ¡ã€æŸ¥è¯¢æ‰§è¡Œï¼‰
â””â”€â”€ models/
    â”œâ”€â”€ pipeline.h / pipeline.cpp
    â”‚   â””â”€â”€ ç®¡çº¿æ•°æ®æ¨¡å‹ï¼ˆå±æ€§ã€å‡ ä½•ã€éªŒè¯ï¼‰
    â””â”€â”€ facility.h / facility.cpp
        â””â”€â”€ è®¾æ–½æ•°æ®æ¨¡å‹ï¼ˆå±æ€§ã€å‡ ä½•ã€éªŒè¯ï¼‰
```

**èŒè´£**:
- é€šç”¨å·¥å…·å’ŒæœåŠ¡
- æ—¥å¿—è®°å½•
- é…ç½®åŠ è½½
- æ•°æ®åº“è¿æ¥
- ä¸šåŠ¡æ¨¡å‹å®šä¹‰

**è®¾è®¡æ¨¡å¼**:
- Singletonï¼ˆLoggerã€Configã€DatabaseManagerï¼‰
- Data Modelï¼ˆPipelineã€Facilityï¼‰

#### `src/dao/` - æ•°æ®è®¿é—®æ¨¡å—
```
src/dao/
â”œâ”€â”€ basedao.h
â”‚   â””â”€â”€ DAOåŸºç±»æ¨¡æ¿ï¼ˆé€šç”¨CRUDæ“ä½œï¼‰
â”œâ”€â”€ pipelinedao.h / pipelinedao.cpp
â”‚   â””â”€â”€ ç®¡çº¿DAOï¼ˆç©ºé—´æŸ¥è¯¢ã€ç»Ÿè®¡åˆ†æï¼‰
â””â”€â”€ facilitydao.h / facilitydao.cpp
    â””â”€â”€ è®¾æ–½DAOï¼ˆç©ºé—´æŸ¥è¯¢ã€å…³è”æŸ¥è¯¢ï¼‰
```

**èŒè´£**:
- æ•°æ®åº“è®¿é—®æŠ½è±¡
- SQLæŸ¥è¯¢å°è£…
- ç©ºé—´æ•°æ®å¤„ç†ï¼ˆPostGISï¼‰
- å¯¹è±¡å…³ç³»æ˜ å°„

**ç‰¹æ€§**:
- æ³›å‹DAOåŸºç±»
- å‚æ•°åŒ–æŸ¥è¯¢
- äº‹åŠ¡æ”¯æŒ
- PostGISç©ºé—´å‡½æ•°

#### `src/map/` - åœ°å›¾æ¸²æŸ“æ¨¡å—
```
src/map/
â”œâ”€â”€ layermanager.h / layermanager.cpp
â”‚   â””â”€â”€ å›¾å±‚ç®¡ç†å™¨ï¼ˆå›¾å±‚æ§åˆ¶ã€å¯è§æ€§ã€åˆ·æ–°ï¼‰
â”œâ”€â”€ symbolmanager.h / symbolmanager.cpp
â”‚   â””â”€â”€ ç¬¦å·ç®¡ç†å™¨ï¼ˆæ ·å¼å®šä¹‰ã€é¢œè‰²é…ç½®ï¼‰
â”œâ”€â”€ pipelinerenderer.h / pipelinerenderer.cpp
â”‚   â””â”€â”€ ç®¡çº¿æ¸²æŸ“å™¨ï¼ˆçº¿è¦ç´ ç»˜åˆ¶ã€æ ·å¼åº”ç”¨ï¼‰
â””â”€â”€ facilityrenderer.h / facilityrenderer.cpp
    â””â”€â”€ è®¾æ–½æ¸²æŸ“å™¨ï¼ˆç‚¹è¦ç´ ç»˜åˆ¶ã€å›¾æ ‡æ˜¾ç¤ºï¼‰
```

**èŒè´£**:
- åœ°å›¾å›¾å±‚ç»„ç»‡
- çŸ¢é‡æ•°æ®æ¸²æŸ“
- ç¬¦å·æ ·å¼ç®¡ç†
- åæ ‡è½¬æ¢

**æŠ€æœ¯è¦ç‚¹**:
- QGraphicsSceneæ¸²æŸ“
- å¤šå›¾å±‚ç®¡ç†
- æ ·å¼åŒ–æ¸²æŸ“
- æ€§èƒ½ä¼˜åŒ–

---

### ğŸ“¦ `resources/` - èµ„æºæ–‡ä»¶

```
resources/
â”œâ”€â”€ images/                       # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ OrangeCat.png            # åº”ç”¨å›¾æ ‡
â”‚   â”œâ”€â”€ close.png                # å…³é—­æŒ‰é’®å›¾æ ‡
â”‚   â”œâ”€â”€ maximize.png             # æœ€å¤§åŒ–æŒ‰é’®å›¾æ ‡
â”‚   â”œâ”€â”€ minimize.png             # æœ€å°åŒ–æŒ‰é’®å›¾æ ‡
â”‚   â””â”€â”€ restore.png              # è¿˜åŸæŒ‰é’®å›¾æ ‡
â”œâ”€â”€ styles/                       # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ style.qss                # Qtæ ·å¼è¡¨ï¼ˆè“è‰²æ¸å˜ä¸»é¢˜ï¼‰
â”œâ”€â”€ image.qrc                     # å›¾ç‰‡èµ„æºé…ç½®æ–‡ä»¶
â””â”€â”€ style.qrc                     # æ ·å¼èµ„æºé…ç½®æ–‡ä»¶
```

**è¯´æ˜**:
- æ‰€æœ‰èµ„æºæ–‡ä»¶é€šè¿‡Qtèµ„æºç³»ç»ŸåµŒå…¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶
- ä½¿ç”¨ `:/new/prefix1/images/xxx.png` è®¿é—®å›¾ç‰‡
- ä½¿ç”¨ `:/new/prefix1/styles/style.qss` è®¿é—®æ ·å¼

---

### ğŸ“š `docs/` - æ–‡æ¡£ç›®å½•

```
docs/
â”œâ”€â”€ ARCHITECTURE.md               # æ¶æ„è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ DATABASE_SETUP.md             # æ•°æ®åº“è®¾ç½®æŒ‡å—
â”œâ”€â”€ DATABASE_USAGE.md             # æ•°æ®åº“ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ INTEGRATION_GUIDE.md          # é›†æˆæŒ‡å—
â”œâ”€â”€ TESTING_GUIDE.md              # æµ‹è¯•æŒ‡å—
â”œâ”€â”€ PATH_FIX.md                   # è·¯å¾„ä¿®å¤è¯´æ˜
â”œâ”€â”€ COMPLETION_SUMMARY.md         # å®Œæˆæ€»ç»“
â”œâ”€â”€ HANG_FIX.md                   # å¡é¡¿é—®é¢˜ä¿®å¤
â”œâ”€â”€ QUICK_START.md                # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ å¯ç”¨æ•°æ®åº“åŠŸèƒ½.md             # æ•°æ®åº“å¯ç”¨æŒ‡å—ï¼ˆä¸­æ–‡ï¼‰
â””â”€â”€ PROJECT_STRUCTURE.md          # æœ¬æ–‡æ¡£
```

---

### ğŸ”§ `scripts/` - å·¥å…·è„šæœ¬

```
scripts/
â”œâ”€â”€ build_release.bat             # Releaseç‰ˆæœ¬ç¼–è¯‘è„šæœ¬
â”œâ”€â”€ run.bat                       # å¿«é€Ÿè¿è¡Œè„šæœ¬
â”œâ”€â”€ run_debug.bat                 # Debugç‰ˆæœ¬è¿è¡Œè„šæœ¬
â”œâ”€â”€ run_release.bat               # Releaseç‰ˆæœ¬è¿è¡Œè„šæœ¬
â”œâ”€â”€ diagnose.bat                  # è¯Šæ–­è„šæœ¬ï¼ˆæ£€æŸ¥ç¯å¢ƒã€DLLï¼‰
â”œâ”€â”€ test_startup.bat              # å¯åŠ¨æµ‹è¯•è„šæœ¬
â””â”€â”€ test_minimal.bat              # æœ€å°åŒ–æµ‹è¯•è„šæœ¬
```

**ä½¿ç”¨è¯´æ˜**:
```bash
# ç¼–è¯‘releaseç‰ˆæœ¬
.\scripts\build_release.bat

# è¿è¡Œç¨‹åºï¼ˆè‡ªåŠ¨é€‰æ‹©ç‰ˆæœ¬ï¼‰
.\scripts\run.bat

# è¯Šæ–­é—®é¢˜
.\scripts\diagnose.bat
```

---

### âš™ï¸ `config/` - é…ç½®æ–‡ä»¶

```
config/
â”œâ”€â”€ app.ini                       # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ [General]                # é€šç”¨è®¾ç½®
â”‚   â”œâ”€â”€ [Map]                    # åœ°å›¾è®¾ç½®
â”‚   â”œâ”€â”€ [Pipeline]               # ç®¡çº¿æ ·å¼é…ç½®
â”‚   â”œâ”€â”€ [Analysis]               # åˆ†æå‚æ•°
â”‚   â””â”€â”€ [UI]                     # ç•Œé¢ä¸»é¢˜
â””â”€â”€ database.ini                  # æ•°æ®åº“é…ç½®
    â”œâ”€â”€ [database]               # è¿æ¥å‚æ•°
    â”œâ”€â”€ [postgis]                # PostGISè®¾ç½®
    â”œâ”€â”€ [performance]            # æ€§èƒ½ä¼˜åŒ–
    â””â”€â”€ [logging]                # æ—¥å¿—é…ç½®
```

---

### ğŸ—„ï¸ `database/` - æ•°æ®åº“è„šæœ¬

```
database/
â”œâ”€â”€ schema.sql                    # æ•°æ®åº“ç»“æ„ï¼ˆè¡¨ã€ç´¢å¼•ã€è§¦å‘å™¨ï¼‰
â””â”€â”€ test_data.sql                 # æµ‹è¯•æ•°æ®ï¼ˆ5æ¡ç®¡çº¿ã€4ä¸ªè®¾æ–½ï¼‰
```

**ä½¿ç”¨è¯´æ˜**:
```bash
# åˆ›å»ºæ•°æ®åº“ç»“æ„
psql -U postgres -d ugims -f database/schema.sql

# å¯¼å…¥æµ‹è¯•æ•°æ®
psql -U postgres -d ugims -f database/test_data.sql
```

---

### ğŸ“¦ `third_party/` - ç¬¬ä¸‰æ–¹ä¾èµ–

```
third_party/
â”œâ”€â”€ Qt6Core.dll                   # Qtæ ¸å¿ƒåº“
â”œâ”€â”€ Qt6Gui.dll                    # Qt GUIåº“
â”œâ”€â”€ Qt6Network.dll                # Qtç½‘ç»œåº“
â”œâ”€â”€ Qt6Sql.dll                    # Qt SQLåº“
â”œâ”€â”€ Qt6Widgets.dll                # Qt Widgetsåº“
â”œâ”€â”€ platforms/                    # Qtå¹³å°æ’ä»¶
â”œâ”€â”€ styles/                       # Qtæ ·å¼æ’ä»¶
â”œâ”€â”€ imageformats/                 # å›¾ç‰‡æ ¼å¼æ’ä»¶
â””â”€â”€ ... (å…¶ä»–DLLå’Œæ’ä»¶)
```

**è¯´æ˜**:
- åŒ…å«ç¨‹åºè¿è¡Œæ‰€éœ€çš„æ‰€æœ‰Qtä¾èµ–
- ä½¿ç”¨ `windeployqt` å·¥å…·è‡ªåŠ¨æ”¶é›†
- ä¸éœ€è¦æäº¤åˆ°Gitä»“åº“

---

### ğŸ—ºï¸ `tilemap/` - åœ°å›¾ç“¦ç‰‡ç¼“å­˜

```
tilemap/
â””â”€â”€ {z}/
    â””â”€â”€ {x}/
        â””â”€â”€ {y}.png

ä¾‹å¦‚: tilemap/11/1018/657.png
```

**è¯´æ˜**:
- æŒ‰ `zoom/x/y` å±‚çº§ç»“æ„ç»„ç»‡
- ä½¿ç”¨PNGæ ¼å¼å­˜å‚¨
- å¤§å°: 256x256åƒç´ 
- æ¥æº: OpenStreetMap
- **å·²åŒ…å«åœ¨Gitä»“åº“ä¸­**ï¼ˆæ–¹ä¾¿å…¶ä»–äººä½¿ç”¨ï¼‰

---

### ğŸ“ `logs/` - æ—¥å¿—æ–‡ä»¶

```
logs/
â”œâ”€â”€ app.log                       # åº”ç”¨æ—¥å¿—
â””â”€â”€ database.log                  # æ•°æ®åº“æ—¥å¿—ï¼ˆå¦‚æœå¯ç”¨ï¼‰
```

**æ ¼å¼ç¤ºä¾‹**:
```
2024-11-27 15:30:45 [INFO] Application started
2024-11-27 15:30:45 [INFO] Logger initialized
2024-11-27 15:30:46 [INFO] Database connected
```

---

### ğŸ”¨ `build/` - æ„å»ºè¾“å‡º

```
build/
â”œâ”€â”€ debug/                        # Debugç‰ˆæœ¬è¾“å‡º
â”‚   â””â”€â”€ CustomTitleBarApp.exe
â””â”€â”€ release/                      # Releaseç‰ˆæœ¬è¾“å‡º
    â””â”€â”€ CustomTitleBarApp.exe
```

**è¯´æ˜**:
- ç”±qmakeå’Œmakeè‡ªåŠ¨ç”Ÿæˆ
- ä¸æäº¤åˆ°Gitä»“åº“
- Debugç‰ˆæœ¬åŒ…å«è°ƒè¯•ä¿¡æ¯
- Releaseç‰ˆæœ¬ç»è¿‡ä¼˜åŒ–

---

## ğŸ”— æ¨¡å—ä¾èµ–å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      main.cpp                            â”‚
â”‚                   (ç¨‹åºå…¥å£)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                         â”‚
          â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   widgets/       â”‚â—„â”€â”€â”€â”€â”€â”‚      ui/         â”‚
â”‚  - BaseWindow    â”‚      â”‚  - MyForm        â”‚
â”‚  - TitleBar      â”‚      â”‚  - MapDialog     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚               â”‚               â”‚
                   â–¼               â–¼               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   tilemap/   â”‚ â”‚     core/    â”‚ â”‚     map/     â”‚
         â”‚ - TileMap    â”‚ â”‚ - Logger     â”‚ â”‚ - Layers     â”‚
         â”‚ - Scheduler  â”‚ â”‚ - Config     â”‚ â”‚ - Renderers  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ - Database   â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
                                 â”‚                â”‚
                                 â–¼                â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
                          â”‚     dao/     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ - PipelineDAOâ”‚
                          â”‚ - FacilityDAOâ”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ å…³é”®è®¾è®¡åŸåˆ™

### 1. **åˆ†å±‚æ¶æ„**
- **è¡¨ç°å±‚** (UI): `src/ui/`, `src/widgets/`
- **ä¸šåŠ¡é€»è¾‘å±‚**: `src/tilemap/`, `src/map/`
- **æ•°æ®è®¿é—®å±‚**: `src/dao/`
- **åŸºç¡€è®¾æ–½å±‚**: `src/core/`

### 2. **æ¨¡å—åŒ–**
- æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€æ˜ç¡®
- ä½è€¦åˆé«˜å†…èš
- ä¾¿äºå•ç‹¬æµ‹è¯•å’Œç»´æŠ¤

### 3. **å¯æ‰©å±•æ€§**
- DAOæ¨¡å¼æ”¯æŒå¤šç§æ•°æ®æº
- æ¸²æŸ“å™¨æ¨¡å¼æ”¯æŒå¤šç§è¦ç´ ç±»å‹
- é…ç½®é©±åŠ¨çš„æ ·å¼ç³»ç»Ÿ

### 4. **å¯ç»´æŠ¤æ€§**
- æ¸…æ™°çš„ç›®å½•ç»“æ„
- è¯¦ç»†çš„æ–‡æ¡£
- ç»Ÿä¸€çš„ç¼–ç è§„èŒƒ

---

## ğŸ“‹ æ–‡ä»¶å‘½åè§„èŒƒ

### æºä»£ç 
- **å¤´æ–‡ä»¶**: `*.h` (å°å†™ï¼Œå•è¯è¿æ¥)
  - ä¾‹: `tilemapmanager.h`, `pipelinedao.h`
- **å®ç°æ–‡ä»¶**: `*.cpp` (ä¸å¤´æ–‡ä»¶åŒå)
- **UIæ–‡ä»¶**: `*.ui` (ä¸å¯¹åº”çš„cppåŒå)

### æ–‡æ¡£
- **è‹±æ–‡æ–‡æ¡£**: `UPPERCASE_WITH_UNDERSCORES.md`
  - ä¾‹: `DATABASE_SETUP.md`, `QUICK_START.md`
- **ä¸­æ–‡æ–‡æ¡£**: `ä¸­æ–‡æè¿°.md`
  - ä¾‹: `å¯ç”¨æ•°æ®åº“åŠŸèƒ½.md`

### è„šæœ¬
- **æ‰¹å¤„ç†**: `lowercase_with_underscores.bat`
  - ä¾‹: `build_release.bat`, `run_debug.bat`

---

## ğŸš€ ç¼–è¯‘è¯´æ˜

### ä½¿ç”¨Qt Creator
1. æ‰“å¼€ `CustomTitleBarApp.pro`
2. é…ç½®æ„å»ºå¥—ä»¶ï¼ˆMinGWï¼‰
3. ç‚¹å‡»"æ„å»º"æŒ‰é’®

### ä½¿ç”¨å‘½ä»¤è¡Œ
```bash
# ç”ŸæˆMakefile
qmake CustomTitleBarApp.pro

# ç¼–è¯‘ï¼ˆå¤šæ ¸åŠ é€Ÿï¼‰
mingw32-make -j4

# è¿è¡Œ
.\release\CustomTitleBarApp.exe
```

---

## ğŸ“¦ éƒ¨ç½²è¯´æ˜

### 1. ç¼–è¯‘Releaseç‰ˆæœ¬
```bash
qmake CustomTitleBarApp.pro -spec win32-g++ "CONFIG+=release"
mingw32-make -j4
```

### 2. æ”¶é›†ä¾èµ–
```bash
cd release
windeployqt CustomTitleBarApp.exe
```

### 3. æ‰“åŒ…å‘å¸ƒ
```
å‘å¸ƒåŒ…/
â”œâ”€â”€ CustomTitleBarApp.exe
â”œâ”€â”€ Qt6Core.dll
â”œâ”€â”€ Qt6Gui.dll
â”œâ”€â”€ ... (å…¶ä»–DLL)
â”œâ”€â”€ config/
â”œâ”€â”€ database/
â”œâ”€â”€ tilemap/
â””â”€â”€ README.md
```

---

## ğŸ” æŸ¥æ‰¾æ–‡ä»¶å¿«é€Ÿå‚è€ƒ

| åŠŸèƒ½ | æ–‡ä»¶ä½ç½® |
|-----|---------|
| ç¨‹åºå…¥å£ | `src/main.cpp` |
| ä¸»çª—å£ | `src/ui/myform.{h,cpp,ui}` |
| åœ°å›¾ç®¡ç† | `src/tilemap/tilemapmanager.{h,cpp}` |
| æ•°æ®åº“è¿æ¥ | `src/core/database/databasemanager.{h,cpp}` |
| ç®¡çº¿æ¸²æŸ“ | `src/map/pipelinerenderer.{h,cpp}` |
| æ ·å¼é…ç½® | `resources/styles/style.qss` |
| åº”ç”¨é…ç½® | `config/app.ini` |
| æ•°æ®åº“ç»“æ„ | `database/schema.sql` |
| é¡¹ç›®é…ç½® | `CustomTitleBarApp.pro` |
| å¿«é€Ÿå¼€å§‹ | `docs/QUICK_START.md` |

---

## âœ… æ¶æ„ä¼˜åŠ¿

### 1. **æ¸…æ™°çš„èŒè´£åˆ’åˆ†**
æ¯ä¸ªç›®å½•å’Œæ¨¡å—éƒ½æœ‰æ˜ç¡®çš„èŒè´£ï¼Œä»£ç ç»„ç»‡æ¸…æ™°ã€‚

### 2. **ä¾¿äºå›¢é˜Ÿåä½œ**
ä¸åŒå¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸åŒçš„æ¨¡å—ï¼Œå‡å°‘å†²çªã€‚

### 3. **æ˜“äºæµ‹è¯•**
æ¨¡å—åŒ–è®¾è®¡ä¾¿äºå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚

### 4. **é™ä½ç»´æŠ¤æˆæœ¬**
æ¸…æ™°çš„ç»“æ„é™ä½äº†ç†è§£å’Œä¿®æ”¹ä»£ç çš„éš¾åº¦ã€‚

### 5. **æ”¯æŒå¢é‡å¼€å‘**
å¯ä»¥é€æ­¥æ·»åŠ æ–°åŠŸèƒ½ï¼Œä¸å½±å“ç°æœ‰æ¨¡å—ã€‚

---

**é¡¹ç›®æ¶æ„å®Œæ•´ï¼Œç»“æ„æ¸…æ™°ï¼Œä¾¿äºå¼€å‘å’Œç»´æŠ¤ï¼** ğŸ‰

