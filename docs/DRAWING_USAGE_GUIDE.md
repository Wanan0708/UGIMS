# 管网绘制功能使用说明

## 📋 功能概述

**管网绘制工具面板**允许用户在地图上交互式地添加各种类型的管网数据,包括:
- **管线** (线状要素): 给水管、排水管、燃气管、电力电缆、通信光缆、供热管
- **设施** (点状要素): 阀门、井盖、泵站、变压器、调压站、接线盒

## 🎨 界面预览

```
┌─────────────────────────┐
│ 🔍 搜索设备...          │
├─────────────────────────┤
│ 📂 设备树               │
│  ├─ 给水管网            │
│  ├─ 排水管网            │
│  └─ ...                 │
├─────────────────────────┤
│ 📍 管线类型             │
│  [💧 给水管]            │
│  [🚰 排水管]            │
│  [🔥 燃气管]            │
│  [⚡ 电力电缆]           │
│  [📡 通信光缆]           │
│  [🌡️ 供热管]            │
│                         │
│ 🔧 设施类型             │
│  [🔵 阀门]              │
│  [🟢 井盖]              │
│  [🏗️ 泵站]              │
│  [🔌 变压器]            │
│  [⚙️ 调压站]            │
│  [📦 接线盒]            │
└─────────────────────────┘
```

## 🖱️ 操作步骤

### 绘制管线

1. **选择管线类型**
   - 在左侧工具面板的"📍 管线类型"分组中
   - 点击你要绘制的管线类型按钮(如"💧 给水管")
   - 按钮会变成蓝色,表示已选中

2. **在地图上绘制**
   - 在地图上点击鼠标左键,添加第一个节点
   - 继续点击添加更多节点
   - 鼠标移动时会显示预览线段

3. **完成绘制**
   - 双击鼠标左键,完成绘制
   - 或按 **Enter** 键完成
   - 或按 **ESC** 键取消绘制

4. **填写属性**
   - 完成绘制后,会弹出"管线属性"对话框
   - 填写管线的详细信息:
     - 基础信息: 编号、名称
     - 物理属性: 管径、材质、压力等级
     - 建设信息: 建设时间、建设单位
     - 运维信息: 状态、养护单位
   - 点击"保存"完成

5. **查看结果**
   - 管线会显示在地图上
   - 在设备树中可以看到新增的管线
   - 可以点击管线查看详细信息

### 绘制设施

1. **选择设施类型**
   - 在左侧工具面板的"🔧 设施类型"分组中
   - 点击你要绘制的设施类型按钮(如"🔵 阀门")
   - 按钮会变成蓝色,表示已选中

2. **在地图上放置**
   - 在地图上点击鼠标左键,放置设施
   - 或按 **ESC** 键取消

3. **填写属性**
   - 点击后,会弹出"设施属性"对话框
   - 填写设施的详细信息:
     - 基础信息: 编号、名称、类型
     - 位置信息: 坐标、高程
     - 物理属性: 规格型号、材质
     - 关联管线: 所属管线
     - 运维信息: 状态、健康度
   - 点击"保存"完成

4. **查看结果**
   - 设施会显示在地图上
   - 在设备树中可以看到新增的设施
   - 可以点击设施查看详细信息

## ⌨️ 快捷键

| 快捷键 | 功能 |
|--------|------|
| **ESC** | 取消当前绘制 |
| **Enter** | 完成管线绘制 |
| **双击** | 完成管线绘制 |
| **右键** | 完成管线绘制 |

## 💡 使用技巧

### 管线绘制技巧
1. **精确绘制**: 可以放大地图后再绘制,提高精度
2. **参考底图**: 使用卫星影像作为参考,沿着道路绘制
3. **节点密度**: 转弯处多添加节点,保证线路平滑
4. **修改节点**: 绘制完成前,可以按ESC键重新绘制

### 设施绘制技巧
1. **精确定位**: 放大地图后点击,提高定位精度
2. **关联管线**: 创建设施时,关联到相应的管线
3. **批量创建**: 可以连续点击多个位置快速创建多个设施

## 🔧 管线类型说明

| 类型 | 图标 | 英文标识 | 说明 |
|------|------|----------|------|
| 给水管 | 💧 | water_supply | 供水管道 |
| 排水管 | 🚰 | sewage | 污水、雨水管道 |
| 燃气管 | 🔥 | gas | 天然气管道 |
| 电力电缆 | ⚡ | electric | 电力线路 |
| 通信光缆 | 📡 | telecom | 通信线路 |
| 供热管 | 🌡️ | heat | 供暖管道 |

## 🏗️ 设施类型说明

| 类型 | 图标 | 英文标识 | 说明 |
|------|------|----------|------|
| 阀门 | 🔵 | valve | 控制管道流量 |
| 井盖 | 🟢 | manhole | 检查井、窨井 |
| 泵站 | 🏗️ | pump_station | 水泵站、加压站 |
| 变压器 | 🔌 | transformer | 电力变压器 |
| 调压站 | ⚙️ | regulator | 燃气调压站 |
| 接线盒 | 📦 | junction_box | 线路接线盒 |

## ❗ 注意事项

1. **坐标准确性**: 绘制时注意坐标的准确性,建议使用高精度底图
2. **属性完整性**: 尽量填写完整的属性信息,便于后续管理
3. **命名规范**: 建议使用统一的命名规则,如 "JS-001" 表示给水管001
4. **保存及时**: 绘制完成后及时保存,避免数据丢失
5. **数据验证**: 保存前会进行数据验证,确保必填项已填写

## 🚀 下一步

绘制完管网数据后,你可以:
- 📊 进行**空间分析** (爆管影响分析、连通性分析)
- 📝 创建**工单** 进行维护管理
- 📈 查看**统计报表** 
- 🗺️ **导出数据** 到其他系统
